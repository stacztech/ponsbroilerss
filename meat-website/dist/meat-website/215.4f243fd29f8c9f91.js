"use strict";(self.webpackChunkmeat_website=self.webpackChunkmeat_website||[]).push([[215],{9215:(P,u,c)=>{c.r(u),c.d(u,{CheckoutComponent:()=>j});var l=c(467),m=c(177),a=c(8326),g=c(7258),e=c(5345),p=c(6868),_=c(7519),h=c(4796),b=c(2522);function f(r,s){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"div",15),e.nrm(2,"img",16),e.j41(3,"div",17)(4,"div",18),e.EFF(5),e.k0s(),e.j41(6,"div",19),e.EFF(7),e.k0s(),e.j41(8,"div",20)(9,"button",21),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateQuantity(n.getOrderItems()[0],-1))}),e.EFF(10,"-"),e.k0s(),e.j41(11,"input",22),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onQuantityChange(o.getOrderItems()[0],n))}),e.k0s(),e.j41(12,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateQuantity(n.getOrderItems()[0],1))}),e.EFF(13,"+"),e.k0s(),e.j41(14,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.removeItem(n.getOrderItems()[0]))}),e.EFF(15,"Remove"),e.k0s()()()(),e.bVm()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.getOrderItems()[0].image,e.B4B)("alt",t.getOrderItems()[0].name),e.R7$(3),e.JRh(t.getOrderItems()[0].name),e.R7$(2),e.SpI("Weight: ",t.getOrderItems()[0].weight,""),e.R7$(2),e.Y8G("disabled",t.getOrderItems()[0].quantity<=t.getMin(t.getOrderItems()[0])),e.R7$(2),e.Y8G("value",t.getOrderItems()[0].quantity<t.getMin(t.getOrderItems()[0])?t.getMin(t.getOrderItems()[0]):t.getOrderItems()[0].quantity)("min",t.getMin(t.getOrderItems()[0]))("step",1)}}function v(r,s){if(1&r&&(e.j41(0,"div",26)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&r){const t=s.$implicit;e.R7$(2),e.E5c("",t.name," (",t.weight,") x ",t.quantity,""),e.R7$(2),e.SpI("\u20b9",t.price*t.quantity,"")}}function k(r,s){if(1&r&&(e.qex(0),e.DNE(1,v,5,4,"div",25),e.bVm()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.getOrderItems())}}function y(r,s){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"h2"),e.EFF(2,"Delivery Address"),e.k0s(),e.j41(3,"app-delivery-address",27),e.bIt("addressSelected",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onAddressSelected(n))}),e.k0s(),e.j41(4,"button",28),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.nextStep())}),e.EFF(5,"Continue"),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(4),e.Y8G("disabled",!t.selectedAddress)}}function C(r,s){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"h2"),e.EFF(2,"Payment Method"),e.k0s(),e.j41(3,"div",29)(4,"input",30),e.bIt("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.paymentMethod=n)}),e.k0s(),e.j41(5,"label",31),e.EFF(6,"Cash on Delivery"),e.k0s()(),e.j41(7,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.prevStep())}),e.EFF(8,"Back"),e.k0s(),e.j41(9,"button",28),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.nextStep())}),e.EFF(10,"Continue"),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(4),e.Y8G("ngModel",t.paymentMethod),e.R7$(5),e.Y8G("disabled",!t.paymentMethod)}}function I(r,s){if(1&r&&(e.j41(0,"div",37)(1,"div")(2,"span"),e.EFF(3),e.k0s()(),e.j41(4,"span"),e.EFF(5),e.k0s()()),2&r){const t=s.$implicit;e.R7$(3),e.Lme("",t.name," (",t.weight,")"),e.R7$(2),e.SpI("\u20b9",t.price*t.quantity,"")}}function O(r,s){if(1&r&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.JRh(t.errorMessage)}}function F(r,s){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"h2"),e.EFF(2,"Review Your Order"),e.k0s(),e.DNE(3,I,6,3,"div",33),e.j41(4,"div",34)(5,"strong"),e.EFF(6,"Delivery Address:"),e.k0s(),e.j41(7,"div"),e.EFF(8),e.k0s(),e.j41(9,"div"),e.EFF(10),e.k0s()(),e.j41(11,"div",34)(12,"strong"),e.EFF(13,"Payment Method:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"div",34)(16,"strong"),e.EFF(17),e.k0s()(),e.DNE(18,O,2,1,"div",35),e.j41(19,"button",32),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.prevStep())}),e.EFF(20,"Back"),e.k0s(),e.j41(21,"button",36),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.placeOrder())}),e.EFF(22),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(3),e.Y8G("ngForOf",t.getOrderItems()),e.R7$(5),e.SjE("",t.selectedAddress.fullName,", ",t.selectedAddress.addressLine1,", ",t.selectedAddress.city,", ",t.selectedAddress.state,", ",t.selectedAddress.pincode,""),e.R7$(2),e.SpI("Phone: ",t.selectedAddress.phoneNumber,""),e.R7$(4),e.SpI(" ","cod"===t.paymentMethod?"Cash on Delivery":t.paymentMethod," "),e.R7$(3),e.SpI("Total: \u20b9",t.getTotal(),""),e.R7$(1),e.Y8G("ngIf",t.errorMessage),e.R7$(3),e.Y8G("disabled",t.isProcessing),e.R7$(1),e.JRh(t.isProcessing?"Placing Order...":"Place Order")}}function x(r,s){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"div",15),e.nrm(2,"img",16),e.j41(3,"div",17)(4,"div",18),e.EFF(5),e.k0s(),e.j41(6,"div",19),e.EFF(7),e.k0s(),e.j41(8,"div",20)(9,"button",21),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateQuantity(n.getOrderItems()[0],-1))}),e.EFF(10,"-"),e.k0s(),e.j41(11,"input",22),e.bIt("change",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onQuantityChange(o.getOrderItems()[0],n))}),e.k0s(),e.j41(12,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateQuantity(n.getOrderItems()[0],1))}),e.EFF(13,"+"),e.k0s(),e.j41(14,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.removeItem(n.getOrderItems()[0]))}),e.EFF(15,"Remove"),e.k0s()()()(),e.bVm()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.getOrderItems()[0].image,e.B4B)("alt",t.getOrderItems()[0].name),e.R7$(3),e.JRh(t.getOrderItems()[0].name),e.R7$(2),e.SpI("Weight: ",t.getOrderItems()[0].weight,""),e.R7$(2),e.Y8G("disabled",t.getOrderItems()[0].quantity<=t.getMin(t.getOrderItems()[0])),e.R7$(2),e.Y8G("value",t.getOrderItems()[0].quantity<t.getMin(t.getOrderItems()[0])?t.getMin(t.getOrderItems()[0]):t.getOrderItems()[0].quantity)("min",t.getMin(t.getOrderItems()[0]))("step",1)}}function M(r,s){if(1&r&&(e.j41(0,"div",26)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&r){const t=s.$implicit;e.R7$(2),e.E5c("",t.name," (",t.weight,") x ",t.quantity,""),e.R7$(2),e.SpI("\u20b9",t.price*t.quantity,"")}}function E(r,s){if(1&r&&(e.qex(0),e.DNE(1,M,5,4,"div",25),e.bVm()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.getOrderItems())}}let j=(()=>{class r{constructor(t,i,n,o){this.cartService=t,this.ordersService=i,this.authService=n,this.router=o,this.currentStep=1,this.selectedAddress=null,this.paymentMethod="",this.isProcessing=!1,this.errorMessage="",this.buyNowItem=null}ngOnInit(){this.authService.checkAuthentication(),this.buyNowItem=this.cartService.getBuyNowItem(),0===this.getOrderItems().length&&this.router.navigate(["/cart"])}onAddressSelected(t){this.selectedAddress=t}getOrderItems(){return this.buyNowItem?[this.buyNowItem]:this.cartService.getCartItems()}getTotal(){return this.cartService.getTotal()}nextStep(){if(!this.authService.isLoggedIn())return this.errorMessage="You must be logged in to continue.",void this.router.navigate(["/login"],{queryParams:{returnUrl:"/checkout"}});1===this.currentStep&&this.selectedAddress?this.currentStep=2:2===this.currentStep&&this.paymentMethod&&(this.currentStep=3)}prevStep(){this.currentStep>1&&this.currentStep--}placeOrder(){var t=this;return(0,l.A)(function*(){if(t.authService.isLoggedIn())if(t.selectedAddress&&t.paymentMethod&&t.getOrderItems().length){t.isProcessing=!0,t.errorMessage="";try{const i={items:t.getOrderItems(),total:t.getTotal(),deliveryDetails:t.selectedAddress,paymentMethod:t.paymentMethod};t.ordersService.placeOrder(i).subscribe(n=>{t.buyNowItem&&t.cartService.clearBuyNowItem(),t.cartService.clearCart(),alert("Order placed successfully!"),t.router.navigate(["/order-success",n.order.id])})}catch(i){t.errorMessage=i?.message||"Failed to place order. Please try again."}finally{t.isProcessing=!1}}else t.errorMessage="Please complete all steps before placing your order.";else t.router.navigate(["/login"],{queryParams:{returnUrl:"/checkout"}})})()}getMin(t){return 1}updateQuantity(t,i){const n=this.getMin(t);let o=Math.max(n,Math.round(t.quantity+i));o<n&&(o=n),this.buyNowItem&&this.buyNowItem.id===t.id?o>=n?(this.buyNowItem={...this.buyNowItem,quantity:o},this.cartService.setBuyNowItem(this.buyNowItem)):this.removeItem(t):o>=n?this.cartService.updateQuantity(t.id,o):this.removeItem(t)}onQuantityChange(t,i){const n=i.target,o=this.getMin(t),d=parseInt(n.value,10);!isNaN(d)&&d>=o?this.updateQuantity(t,d-t.quantity):!isNaN(d)&&d<o?(this.updateQuantity(t,o-t.quantity),n.value=o.toString()):n.value=t.quantity.toString()}removeItem(t){this.buyNowItem&&this.buyNowItem.id===t.id?(this.cartService.clearBuyNowItem(),this.buyNowItem=null,this.router.navigate(["/cart"])):this.cartService.removeFromCart(t.id)}addItem(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(p.m),e.rXU(_.B),e.rXU(h.u),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-checkout"]],standalone:!0,features:[e.aNF],decls:50,vars:15,consts:[[1,"container","my-5"],[1,"row","checkout-flex"],[1,"col-lg-8","order-lg-1","main-checkout-col"],[1,"progress-steps","mb-4"],[1,"step"],[1,"step-number"],[1,"step-label"],[1,"step-divider"],[1,"order-summary-mobile-wrapper","d-block","d-lg-none"],[1,"card","order-summary-card","mb-4","mx-auto"],[1,"card-body"],[4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"col-lg-4","order-lg-2","order-summary-col","d-none","d-lg-block"],[1,"card","order-summary-card","mb-4"],[1,"d-flex","align-items-center","mb-3"],[2,"width","90px","height","90px","object-fit","cover","border-radius","6px","margin-right","18px",3,"src","alt"],[1,"flex-grow-1"],[2,"font-size","1.2rem","font-weight","600"],[2,"color","#555"],[1,"d-flex","align-items-center","mt-2"],[1,"btn","btn-sm","btn-outline-secondary",3,"disabled","click"],["type","number",1,"form-control","mx-2","quantity-input",2,"width","50px","display","inline-block",3,"value","min","step","change"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"btn","btn-sm","btn-danger","ms-3",3,"click"],["class","d-flex justify-content-between mb-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2"],[3,"addressSelected"],["type","button",1,"btn","btn-primary","mt-3",3,"disabled","click"],[1,"form-check"],["type","radio","name","paymentMethod","id","cod","value","cod","required","",1,"form-check-input",3,"ngModel","ngModelChange"],["for","cod",1,"form-check-label"],["type","button",1,"btn","btn-secondary","mt-3","me-2",3,"click"],["class","d-flex justify-content-between align-items-center mb-2",4,"ngFor","ngForOf"],[1,"mt-3"],["class","alert alert-danger",4,"ngIf"],["type","button",1,"btn","btn-success","mt-3",3,"disabled","click"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"alert","alert-danger"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e.EFF(6,"1"),e.k0s(),e.j41(7,"span",6),e.EFF(8,"Delivery Address"),e.k0s()(),e.nrm(9,"div",7),e.j41(10,"div",4)(11,"span",5),e.EFF(12,"2"),e.k0s(),e.j41(13,"span",6),e.EFF(14,"Payment Method"),e.k0s()(),e.nrm(15,"div",7),e.j41(16,"div",4)(17,"span",5),e.EFF(18,"3"),e.k0s(),e.j41(19,"span",6),e.EFF(20,"Review Order"),e.k0s()()(),e.j41(21,"div",8)(22,"div",9)(23,"div",10)(24,"h3"),e.EFF(25,"Order Summary"),e.k0s(),e.DNE(26,f,16,8,"ng-container",11),e.DNE(27,k,2,1,"ng-container",11),e.nrm(28,"hr"),e.j41(29,"div",12)(30,"strong"),e.EFF(31,"Total"),e.k0s(),e.j41(32,"strong"),e.EFF(33),e.k0s()()()()(),e.DNE(34,y,6,1,"div",11),e.DNE(35,C,11,2,"div",11),e.DNE(36,F,23,12,"div",11),e.k0s(),e.j41(37,"div",13)(38,"div",14)(39,"div",10)(40,"h3"),e.EFF(41,"Order Summary"),e.k0s(),e.DNE(42,x,16,8,"ng-container",11),e.DNE(43,E,2,1,"ng-container",11),e.nrm(44,"hr"),e.j41(45,"div",12)(46,"strong"),e.EFF(47,"Total"),e.k0s(),e.j41(48,"strong"),e.EFF(49),e.k0s()()()()()()()),2&i&&(e.R7$(4),e.AVh("active",1===n.currentStep),e.R7$(6),e.AVh("active",2===n.currentStep),e.R7$(6),e.AVh("active",3===n.currentStep),e.R7$(10),e.Y8G("ngIf",1===n.currentStep&&1===n.getOrderItems().length),e.R7$(1),e.Y8G("ngIf",!(1===n.currentStep&&1===n.getOrderItems().length)),e.R7$(6),e.SpI("\u20b9",n.getTotal(),""),e.R7$(1),e.Y8G("ngIf",1===n.currentStep),e.R7$(1),e.Y8G("ngIf",2===n.currentStep),e.R7$(1),e.Y8G("ngIf",3===n.currentStep),e.R7$(6),e.Y8G("ngIf",1===n.currentStep&&1===n.getOrderItems().length),e.R7$(1),e.Y8G("ngIf",!(1===n.currentStep&&1===n.getOrderItems().length)),e.R7$(6),e.SpI("\u20b9",n.getTotal(),""))},dependencies:[m.MD,m.Sq,m.bT,a.YN,a.me,a.Fm,a.BC,a.YS,a.vS,g.K],styles:[".order-summary-card[_ngcontent-%COMP%]{min-width:320px;max-width:420px;width:100%}.checkout-flex[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.order-summary-col[_ngcontent-%COMP%]{order:2}.main-checkout-col[_ngcontent-%COMP%]{order:1}.progress-steps[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:40px}.step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#888}.step.active[_ngcontent-%COMP%]{color:#e31837;font-weight:700}.step-number[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#ccc;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}.step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:#E31837}.step-divider[_ngcontent-%COMP%]{width:60px;height:2px;background:#ccc;margin:0 15px}.d-inline-flex.align-items-center[_ngcontent-%COMP%]{gap:.5rem;margin-top:.5rem;margin-bottom:.5rem}.btn-outline-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{min-width:36px;min-height:36px;font-size:1.1rem;padding:0 .7rem;border-radius:6px;transition:background .2s,color .2s,border .2s;box-shadow:0 1px 2px #00000008}.btn-outline-secondary[_ngcontent-%COMP%]{border:1.5px solid #E31837;color:#e31837;background:#fff}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#E31837;color:#fff;border-color:#e31837}.btn-danger[_ngcontent-%COMP%]{background:#fff;color:#e31837;border:1.5px solid #E31837}.btn-danger[_ngcontent-%COMP%]:hover{background:#E31837;color:#fff}input[type=number].form-control-sm[_ngcontent-%COMP%]{font-size:1rem;height:36px;padding:0 .5rem;border-radius:6px;border:1.5px solid #ddd;margin:0 2px;width:70px;text-align:center;background:#fafbfc;box-shadow:0 1px 2px #00000005}.add-item-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4em;color:#e31837;border:1.5px solid #E31837;background:#fff;border-radius:6px;padding:.4em 1.1em;font-size:1.05rem;font-weight:500;margin:1.2em 0 .5em;cursor:pointer;transition:background .2s,color .2s,border .2s;box-shadow:0 1px 2px #00000008;text-decoration:none}.add-item-btn[_ngcontent-%COMP%]:hover{background:#E31837;color:#fff;border-color:#e31837;text-decoration:none}.add-item-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2em;margin-right:.2em}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}@media (max-width: 768px){.checkout-flex[_ngcontent-%COMP%]{flex-direction:column}.order-summary-col[_ngcontent-%COMP%]{order:2;display:none!important}.main-checkout-col[_ngcontent-%COMP%]{order:1}.container.my-5[_ngcontent-%COMP%]{padding:.5rem}.progress-steps[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.card[_ngcontent-%COMP%]{position:static;margin-top:1rem}.d-inline-flex.align-items-center[_ngcontent-%COMP%]{flex-direction:row;gap:.15rem}input[type=number].form-control-sm[_ngcontent-%COMP%]{width:48px;font-size:.95rem;height:32px}.btn-outline-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{min-width:28px;min-height:28px;font-size:.95rem;padding:0 .3rem;border-radius:5px}.add-item-btn[_ngcontent-%COMP%]{width:100%;justify-content:center;font-size:1rem;padding:.5em 0;margin:1em 0 .5em}.order-summary-mobile-wrapper[_ngcontent-%COMP%]{display:block}.order-summary-card[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}}"]})}}return r})()}}]);