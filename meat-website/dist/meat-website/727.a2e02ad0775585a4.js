"use strict";(self.webpackChunkmeat_website=self.webpackChunkmeat_website||[]).push([[727],{2727:(x,l,a)=>{a.r(l),a.d(l,{CartComponent:()=>f});var s=a(177),u=a(2522),t=a(5345),g=a(6868),_=a(4796);function p(o,m){1&o&&(t.j41(0,"div",3)(1,"h3"),t.EFF(2,"Your cart is empty"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Add some items to your cart to see them here!"),t.k0s(),t.j41(5,"a",4),t.EFF(6,"Continue Shopping"),t.k0s()())}function h(o,m){if(1&o){const e=t.RV6();t.j41(0,"div",12)(1,"div",8)(2,"div",13),t.nrm(3,"img",14),t.j41(4,"div",15)(5,"h5",16),t.EFF(6),t.k0s(),t.j41(7,"p",16),t.EFF(8),t.k0s(),t.j41(9,"div",13)(10,"div",17)(11,"button",18),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.updateQuantity(r,-1))}),t.EFF(12," - "),t.k0s(),t.j41(13,"input",19),t.bIt("change",function(i){const c=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.onQuantityChange(c.id,i))}),t.k0s(),t.j41(14,"button",20),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.updateQuantity(r,1))}),t.EFF(15," + "),t.k0s()(),t.j41(16,"button",21),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.removeItem(r))}),t.EFF(17," Remove "),t.k0s()()(),t.j41(18,"div",22)(19,"div",23),t.EFF(20),t.k0s(),t.j41(21,"small",24),t.EFF(22),t.k0s()()()()()}if(2&o){const e=m.$implicit;t.R7$(3),t.Y8G("src",e.image,t.B4B)("alt",e.name),t.R7$(3),t.JRh(e.name),t.R7$(2),t.SpI("Weight: ",e.weight,""),t.R7$(3),t.Y8G("disabled",e.quantity<=1),t.R7$(2),t.Y8G("value",e.quantity)("min",1)("step",1),t.R7$(7),t.SpI("\u20b9",e.price*e.quantity,""),t.R7$(2),t.SpI("\u20b9",e.price," each")}}function C(o,m){if(1&o){const e=t.RV6();t.j41(0,"div",5),t.DNE(1,h,23,10,"div",6),t.j41(2,"div",7)(3,"div",8)(4,"div",9)(5,"h4",10),t.EFF(6),t.k0s(),t.j41(7,"a",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.proceedToCheckout())}),t.EFF(8,"Proceed to Checkout"),t.k0s()()()()()}if(2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.cartItems),t.R7$(5),t.SpI("Total: \u20b9",e.total,"")}}let f=(()=>{class o{constructor(e,n,i){this.cartService=e,this.router=n,this.authService=i,this.cartItems=[],this.total=0,console.log("CartComponent loaded"),this.subscription=this.cartService.cartItems$.subscribe(r=>{console.log("CartComponent items:",r),this.cartItems=r,this.total=this.calculateTotal()})}ngOnInit(){}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}calculateTotal(){return this.cartItems.reduce((e,n)=>e+n.price*n.quantity,0)}getStep(e){return e.weight&&(e.weight.includes("1/2")||e.weight.includes("0.5")||e.weight.includes("500"))?.5:1}updateQuantity(e,n){const i=Math.max(1,Math.round(e.quantity+n));this.cartService.updateQuantity(e.id,i)}removeItem(e){this.cartService.removeFromCart(e.id)}clearCart(){this.cartService.clearCart()}proceedToCheckout(){this.authService.isLoggedIn()?this.router.navigate(["/checkout"]):this.router.navigate(["/login"],{queryParams:{returnUrl:"/cart"}})}onQuantityChange(e,n){const i=n.target,r=this.cartItems.find(d=>d.id===e);if(!r)return;let c=parseInt(i.value,10);!isNaN(c)&&c>=1?this.cartService.updateQuantity(r.id,c):!isNaN(c)&&c<1?this.cartService.updateQuantity(r.id,1):i.value=r.quantity.toString()}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(g.m),t.rXU(u.Ix),t.rXU(_.u))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-cart"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"container","my-5"],["class","text-center py-5",4,"ngIf"],["class","cart-items",4,"ngIf"],[1,"text-center","py-5"],["routerLink","/",1,"btn","btn-primary"],[1,"cart-items"],["class","cart-item card mb-3",4,"ngFor","ngForOf"],[1,"card","mt-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["routerLink","/checkout",1,"btn","btn-primary",3,"click"],[1,"cart-item","card","mb-3"],[1,"d-flex","align-items-center"],[1,"cart-item-image","me-3",3,"src","alt"],[1,"flex-grow-1"],[1,"mb-1"],[1,"quantity-control"],[1,"btn","btn-sm","btn-outline-secondary",3,"disabled","click"],["type","number","placeholder","Qty",1,"form-control","mx-2","quantity-input",3,"value","min","step","change"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"btn","btn-sm","btn-danger","ms-3",3,"click"],[1,"text-end","ms-3"],[1,"fw-bold"],[1,"text-muted"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Shopping Cart"),t.k0s(),t.DNE(3,p,7,0,"div",1),t.DNE(4,C,9,2,"div",2),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngIf",0===i.cartItems.length),t.R7$(1),t.Y8G("ngIf",i.cartItems.length>0))},dependencies:[s.MD,s.Sq,s.bT,u.Wk],styles:[".cart-item-image[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:4px}.quantity-control[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity-input[_ngcontent-%COMP%]{width:60px;text-align:center;-moz-appearance:textfield}.quantity-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .quantity-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:.5rem}h2[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1rem}.cart-item.card[_ngcontent-%COMP%]{flex-direction:row;align-items:center;padding:.5rem}.cart-item[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.5rem;width:100%;display:flex;flex-direction:column}.cart-item[_ngcontent-%COMP%]   .d-flex.align-items-center[_ngcontent-%COMP%]{flex-direction:row;align-items:center;width:100%;flex-wrap:wrap}.cart-item-image[_ngcontent-%COMP%]{width:70px;height:70px;margin-bottom:0;margin-right:.75rem!important}.cart-item[_ngcontent-%COMP%]   .flex-grow-1[_ngcontent-%COMP%]{width:auto;flex-grow:1;text-align:left}.cart-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.1rem;line-height:1.3}.cart-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:.5rem}.cart-item[_ngcontent-%COMP%]   .d-flex.align-items-center[_ngcontent-%COMP%] > .d-flex.align-items-center[_ngcontent-%COMP%]{flex-direction:row;width:100%;justify-content:flex-start;margin-top:.5rem;gap:.5rem}.quantity-control[_ngcontent-%COMP%]{flex-grow:0;justify-content:flex-start;min-width:120px}.quantity-input[_ngcontent-%COMP%]{width:40px;font-size:.8rem;height:30px;padding:.25rem}.quantity-control[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:.15rem .4rem;font-size:.8rem;height:30px;width:30px}.cart-item[_ngcontent-%COMP%]   .ms-3[_ngcontent-%COMP%]{margin-left:auto!important;text-align:right;display:flex;flex-direction:column;align-items:flex-end;white-space:nowrap}.cart-item[_ngcontent-%COMP%]   .fw-bold[_ngcontent-%COMP%]{font-size:1rem}.cart-item[_ngcontent-%COMP%]   small.text-muted[_ngcontent-%COMP%]{font-size:.7rem}.card.mt-4[_ngcontent-%COMP%]{margin-top:1rem!important}.card.mt-4[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem;padding:1rem}.card.mt-4[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:.5rem}.card.mt-4[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;font-size:.9rem;padding:.6rem}}"]})}}return o})()}}]);