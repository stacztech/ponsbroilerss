"use strict";(self.webpackChunkmeat_website=self.webpackChunkmeat_website||[]).push([[10],{8010:(M,m,i)=>{i.r(m),i.d(m,{ReviewOrderComponent:()=>O});var p=i(467),l=i(177),e=i(5345),_=i(2522),g=i(7519),f=i(6868);function v(r,h){if(1&r&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&r){const t=h.$implicit;e.R7$(1),e.LHq(" ",t.name," (",t.weight,") x",t.quantity," - \u20b9",t.price*t.quantity," ")}}function u(r,h){if(1&r){const t=e.RV6();e.j41(0,"div")(1,"h3"),e.EFF(2,"Items:"),e.k0s(),e.j41(3,"ul"),e.DNE(4,v,2,4,"li",3),e.k0s(),e.j41(5,"h3"),e.EFF(6,"Delivery Address:"),e.k0s(),e.j41(7,"div"),e.EFF(8),e.k0s(),e.j41(9,"div"),e.EFF(10),e.k0s(),e.j41(11,"div"),e.EFF(12),e.k0s(),e.j41(13,"h3"),e.EFF(14,"Payment Method:"),e.k0s(),e.j41(15,"div"),e.EFF(16),e.k0s(),e.j41(17,"h3"),e.EFF(18),e.k0s(),e.j41(19,"button",4),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmOrder())}),e.EFF(20),e.k0s()()}if(2&r){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.cartItems),e.R7$(4),e.JRh(t.address.fullName),e.R7$(2),e.LHq("",t.address.addressLine1,", ",t.address.city,", ",t.address.state,", ",t.address.pincode,""),e.R7$(2),e.SpI("Phone: ",t.address.phoneNumber,""),e.R7$(4),e.JRh("cod"===t.paymentMethod?"Cash on Delivery":t.paymentMethod),e.R7$(2),e.SpI("Total: \u20b9",t.total,""),e.R7$(1),e.Y8G("disabled",t.isPlacingOrder),e.R7$(1),e.SpI(" ",t.isPlacingOrder?"Placing Order...":"Confirm Order"," ")}}let O=(()=>{class r{constructor(t,n,o){this.router=t,this.ordersService=n,this.cartService=o,this.paymentMethod="",this.cartItems=[],this.total=0,this.isPlacingOrder=!1;const a=this.router.getCurrentNavigation()?.extras.state;if(a)this.address=a.address,this.paymentMethod=a.paymentMethod,this.cartItems=a.cartItems,this.total=a.total;else{const d=this.cartService.getCartItems();if(d&&d.length>0)this.cartItems=d,this.total=d.reduce((c,s)=>c+s.price*s.quantity,0);else{const c=localStorage.getItem("reviewOrder");if(c){const s=JSON.parse(c);this.address=s.address,this.paymentMethod=s.paymentMethod,this.cartItems=s.cartItems,this.total=s.total}}}(!this.cartItems||0===this.cartItems.length)&&this.router.navigate(["/cart"])}confirmOrder(){var t=this;return(0,p.A)(function*(){if(t.address&&t.paymentMethod&&t.cartItems.length){t.isPlacingOrder=!0;try{t.ordersService.placeOrder({items:t.cartItems,total:t.total,deliveryDetails:t.address,paymentMethod:t.paymentMethod}).subscribe(o=>{t.cartService.clearCart(),t.router.navigate(["/order-success",o.order.id])})}catch{alert("Failed to place order.")}finally{t.isPlacingOrder=!1}}})()}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(_.Ix),e.rXU(g.B),e.rXU(f.m))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-review-order"]],standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[[1,"review-order-container"],[1,"review-order-card"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"btn-confirm",3,"disabled","click"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Review Your Order"),e.k0s(),e.DNE(4,u,21,11,"div",2),e.k0s()()),2&n&&(e.R7$(4),e.Y8G("ngIf",o.cartItems&&o.address&&o.paymentMethod))},dependencies:[l.MD,l.Sq,l.bT],styles:[".review-order-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:60vh;background:#f8f8f8;padding:40px 0}.review-order-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 8px 32px #2c3e5014;padding:36px 32px 32px;max-width:480px;width:100%;margin:0 auto}.review-order-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e31837;font-size:2rem;font-weight:700;margin-bottom:18px;text-align:center}.review-order-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.15rem;font-weight:600;margin-top:18px;margin-bottom:8px}.review-order-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:18px;margin-bottom:0}.review-order-card[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.08rem;color:#333;margin-bottom:6px}.review-order-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:1.05rem;color:#444;margin-bottom:2px}.btn-confirm[_ngcontent-%COMP%]{background:#E31837;color:#fff;border:none;border-radius:8px;padding:12px 32px;font-size:1.1rem;font-weight:600;margin-top:24px;cursor:pointer;transition:background .2s,box-shadow .2s;box-shadow:0 2px 8px #e3183714;display:block;width:100%}.btn-confirm[_ngcontent-%COMP%]:disabled{background:#ccc;color:#fff;cursor:not-allowed}.btn-confirm[_ngcontent-%COMP%]:not(:disabled):hover{background:#c41530;box-shadow:0 4px 16px #e3183724}@media (max-width: 600px){.review-order-card[_ngcontent-%COMP%]{padding:18px 6px;border-radius:10px}.review-order-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}}"]})}}return r})()}}]);