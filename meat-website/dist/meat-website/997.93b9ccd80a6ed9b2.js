"use strict";(self.webpackChunkmeat_website=self.webpackChunkmeat_website||[]).push([[997],{3997:(N,p,d)=>{d.r(p),d.d(p,{RegisterComponent:()=>D});var g=d(177),a=d(8326),f=d(2522),e=d(5345),h=d(4796);function b(n,r){if(1&n){const s=e.RV6();e.j41(0,"div",36),e.EFF(1),e.j41(2,"button",37),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.error="")}),e.k0s()()}if(2&n){const s=e.XpG();e.R7$(1),e.SpI(" ",s.error," ")}}function v(n,r){if(1&n){const s=e.RV6();e.j41(0,"div",38),e.EFF(1),e.j41(2,"button",37),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.success="")}),e.k0s()()}if(2&n){const s=e.XpG();e.R7$(1),e.SpI(" ",s.success," ")}}function E(n,r){1&n&&(e.j41(0,"span"),e.EFF(1,"Name is required"),e.k0s())}function R(n,r){1&n&&(e.j41(0,"span"),e.EFF(1,"Name must be at least 3 characters long"),e.k0s())}function C(n,r){if(1&n&&(e.j41(0,"div",39),e.DNE(1,E,2,0,"span",20),e.DNE(2,R,2,0,"span",20),e.k0s()),2&n){e.XpG();const s=e.sdS(15);e.R7$(1),e.Y8G("ngIf",null==s.errors?null:s.errors.required),e.R7$(1),e.Y8G("ngIf",null==s.errors?null:s.errors.minlength)}}function M(n,r){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const s=e.XpG();e.R7$(1),e.JRh(s.isOtpSent?"Resend OTP":"Send OTP")}}function P(n,r){1&n&&e.nrm(0,"span",40)}function k(n,r){1&n&&(e.j41(0,"div",39),e.EFF(1," Please enter a valid email address "),e.k0s())}function O(n,r){1&n&&(e.j41(0,"span"),e.EFF(1,"Verify OTP"),e.k0s())}function T(n,r){1&n&&e.nrm(0,"span",40)}function w(n,r){1&n&&(e.j41(0,"div",39),e.EFF(1," Please enter the 6-digit OTP "),e.k0s())}function F(n,r){1&n&&(e.j41(0,"div",45),e.EFF(1," Email verified successfully! "),e.k0s())}function I(n,r){if(1&n){const s=e.RV6();e.j41(0,"div",10)(1,"label",41),e.EFF(2,"Enter OTP"),e.k0s(),e.j41(3,"div",16)(4,"input",42,43),e.bIt("ngModelChange",function(t){e.eBV(s);const l=e.XpG();return e.Njj(l.otp=t)}),e.k0s(),e.j41(6,"button",19),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.verifyEmailOTP())}),e.DNE(7,O,2,0,"span",20),e.DNE(8,T,1,0,"span",21),e.k0s()(),e.DNE(9,w,2,0,"div",14),e.DNE(10,F,2,0,"div",44),e.k0s()}if(2&n){const s=e.sdS(5),i=e.XpG();e.R7$(4),e.AVh("is-invalid",s.invalid&&s.touched),e.Y8G("ngModel",i.otp),e.R7$(2),e.Y8G("disabled",s.invalid||i.isOtpVerifying),e.R7$(1),e.Y8G("ngIf",!i.isOtpVerifying),e.R7$(1),e.Y8G("ngIf",i.isOtpVerifying),e.R7$(1),e.Y8G("ngIf",s.invalid&&s.touched),e.R7$(1),e.Y8G("ngIf",i.isEmailVerified)}}function j(n,r){1&n&&(e.j41(0,"div",39),e.EFF(1," Password must be at least 6 characters long "),e.k0s())}function y(n,r){1&n&&(e.j41(0,"div",39),e.EFF(1," Passwords do not match "),e.k0s())}function G(n,r){1&n&&(e.j41(0,"div",39),e.EFF(1,"Please enter a valid 10-digit phone number"),e.k0s())}function V(n,r){1&n&&(e.j41(0,"span"),e.EFF(1,"Create Account"),e.k0s())}function $(n,r){1&n&&e.nrm(0,"span",40)}let D=(()=>{class n{constructor(s,i){this.authService=s,this.router=i,this.user={name:"",email:"",phone:"",password:"",address:""},this.confirmPassword="",this.otp="",this.isOtpSent=!1,this.isEmailVerified=!1,this.isLoading=!1,this.isOtpLoading=!1,this.isOtpVerifying=!1,this.error="",this.success=""}passwordsMatch(){return this.user.password===this.confirmPassword}sendEmailOTP(){this.user.email?(this.isOtpLoading=!0,this.error="",this.success="",this.authService.sendEmailOTP(this.user.email).subscribe({next:s=>{this.isOtpSent=!0,this.success=s?.message||"OTP sent to your email.",this.isOtpLoading=!1},error:s=>{this.error=s?.error?.message||"Failed to send OTP. Please try again.",this.isOtpLoading=!1}})):this.error="Please enter a valid email address."}verifyEmailOTP(){this.otp&&(this.isOtpVerifying=!0,this.error="",this.authService.verifyEmailOT(this.otp).subscribe({next:()=>{this.isEmailVerified=!0,this.success="Email verified successfully!",this.isOtpVerifying=!1},error:s=>{this.error=s.message||"Invalid OTP. Please try again.",this.isOtpVerifying=!1}}))}onSubmit(){const s=document.querySelector("form");s&&Array.from(s.elements).forEach(t=>{t.name&&t.classList.add("ng-touched")}),this.isEmailVerified?!this.user.name||this.user.name.length<3?this.error="Name is required and must be at least 3 characters.":this.user.email?!this.user.password||this.user.password.length<6?this.error="Password must be at least 6 characters long.":this.passwordsMatch()?this.user.phone&&/^[0-9]{10}$/.test(this.user.phone)?(this.isLoading=!0,this.error="",this.authService.register({name:this.user.name,email:this.user.email,password:this.user.password,phone:this.user.phone}).subscribe({next:()=>{this.success="Account created successfully! Redirecting to login...",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:t=>{this.error=t.message||"Failed to create account. Please try again.",this.isLoading=!1}})):this.error="Please enter a valid 10-digit phone number.":this.error="Passwords do not match.":this.error="Email is required.":this.error="Please verify your email first."}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(h.u),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:54,vars:30,consts:[[1,"container","my-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-body","p-5"],[1,"text-center","mb-4"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[3,"ngSubmit"],["registerForm","ngForm"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","","minlength","3",1,"form-control",3,"ngModel","ngModelChange"],["nameInput","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],[1,"input-group"],["type","email","id","email","name","email","required","","email","",1,"form-control",3,"ngModel","disabled","ngModelChange"],["emailInput","ngModel"],["type","button",1,"btn","btn-outline-brown",3,"disabled","click"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["class","mb-3",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","","minlength","6",1,"form-control",3,"ngModel","ngModelChange"],["passwordInput","ngModel"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","name","confirmPassword","required","",1,"form-control",3,"ngModel","ngModelChange"],["confirmPasswordInput","ngModel"],["for","phone",1,"form-label"],["type","tel","id","phone","name","phone","required","","pattern","[0-9]{10}",1,"form-control",3,"ngModel","ngModelChange"],["phoneInput","ngModel"],["type","submit",1,"btn","btn-brown","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"mb-0"],["routerLink","/login",1,"text-brown"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"invalid-feedback"],["role","status",1,"spinner-border","spinner-border-sm"],["for","otp",1,"form-label"],["type","text","id","otp","name","otp","required","","pattern","[0-9]{6}",1,"form-control",3,"ngModel","ngModelChange"],["otpInput","ngModel"],["class","form-text text-success",4,"ngIf"],[1,"form-text","text-success"]],template:function(i,t){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e.EFF(6,"Create Account"),e.k0s(),e.DNE(7,b,3,1,"div",6),e.DNE(8,v,3,1,"div",7),e.j41(9,"form",8,9),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(11,"div",10)(12,"label",11),e.EFF(13,"Full Name"),e.k0s(),e.j41(14,"input",12,13),e.bIt("ngModelChange",function(o){return t.user.name=o}),e.k0s(),e.DNE(16,C,3,2,"div",14),e.k0s(),e.j41(17,"div",10)(18,"label",15),e.EFF(19,"Email address"),e.k0s(),e.j41(20,"div",16)(21,"input",17,18),e.bIt("ngModelChange",function(o){return t.user.email=o}),e.k0s(),e.j41(23,"button",19),e.bIt("click",function(){return t.sendEmailOTP()}),e.DNE(24,M,2,1,"span",20),e.DNE(25,P,1,0,"span",21),e.k0s()(),e.DNE(26,k,2,0,"div",14),e.k0s(),e.DNE(27,I,11,8,"div",22),e.j41(28,"div",10)(29,"label",23),e.EFF(30,"Create Password"),e.k0s(),e.j41(31,"input",24,25),e.bIt("ngModelChange",function(o){return t.user.password=o}),e.k0s(),e.DNE(33,j,2,0,"div",14),e.k0s(),e.j41(34,"div",10)(35,"label",26),e.EFF(36,"Confirm Password"),e.k0s(),e.j41(37,"input",27,28),e.bIt("ngModelChange",function(o){return t.confirmPassword=o}),e.k0s(),e.DNE(39,y,2,0,"div",14),e.k0s(),e.j41(40,"div",10)(41,"label",29),e.EFF(42,"Phone Number"),e.k0s(),e.j41(43,"input",30,31),e.bIt("ngModelChange",function(o){return t.user.phone=o}),e.k0s(),e.DNE(45,G,2,0,"div",14),e.k0s(),e.j41(46,"button",32),e.DNE(47,V,2,0,"span",20),e.DNE(48,$,1,0,"span",21),e.k0s(),e.j41(49,"div",33)(50,"p",34),e.EFF(51,"Already have an account? "),e.j41(52,"a",35),e.EFF(53,"Login"),e.k0s()()()()()()()()()),2&i){const l=e.sdS(10),o=e.sdS(15),c=e.sdS(22),u=e.sdS(32),_=e.sdS(38),m=e.sdS(44);e.R7$(7),e.Y8G("ngIf",t.error),e.R7$(1),e.Y8G("ngIf",t.success),e.R7$(6),e.AVh("is-invalid",o.invalid&&o.touched),e.Y8G("ngModel",t.user.name),e.R7$(2),e.Y8G("ngIf",o.invalid&&o.touched),e.R7$(5),e.AVh("is-invalid",c.invalid&&c.touched),e.Y8G("ngModel",t.user.email)("disabled",t.isEmailVerified),e.R7$(2),e.Y8G("disabled",c.invalid||t.isEmailVerified||t.isOtpLoading),e.R7$(1),e.Y8G("ngIf",!t.isOtpLoading),e.R7$(1),e.Y8G("ngIf",t.isOtpLoading),e.R7$(1),e.Y8G("ngIf",c.invalid&&c.touched),e.R7$(1),e.Y8G("ngIf",t.isOtpSent&&!t.isEmailVerified),e.R7$(4),e.AVh("is-invalid",u.invalid&&u.touched),e.Y8G("ngModel",t.user.password),e.R7$(2),e.Y8G("ngIf",u.invalid&&u.touched),e.R7$(4),e.AVh("is-invalid",!t.passwordsMatch()&&_.touched),e.Y8G("ngModel",t.confirmPassword),e.R7$(2),e.Y8G("ngIf",!t.passwordsMatch()&&_.touched),e.R7$(4),e.AVh("is-invalid",m.invalid&&m.touched),e.Y8G("ngModel",t.user.phone),e.R7$(2),e.Y8G("ngIf",m.invalid&&m.touched),e.R7$(1),e.Y8G("disabled",l.invalid||!t.isEmailVerified||!t.passwordsMatch()||t.isLoading),e.R7$(1),e.Y8G("ngIf",!t.isLoading),e.R7$(1),e.Y8G("ngIf",t.isLoading)}},dependencies:[g.MD,g.bT,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.xh,a.R_,a.Dg,a.vS,a.cV,f.Wk],styles:[".text-brown[_ngcontent-%COMP%]{color:#e31837}.btn-brown[_ngcontent-%COMP%]{background-color:#e31837;color:#fff;transition:background-color .3s ease}.btn-brown[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#c41530;color:#fff;cursor:pointer}.btn-outline-brown[_ngcontent-%COMP%]{color:#e31837;border-color:#e31837}.btn-outline-brown[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e31837;color:#fff}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.card[_ngcontent-%COMP%]{border-radius:10px;border:none}.form-control[_ngcontent-%COMP%]:focus{border-color:#e31837;box-shadow:0 0 0 .2rem #e3183740}.invalid-feedback[_ngcontent-%COMP%]{font-size:.875em}.alert[_ngcontent-%COMP%]{margin-bottom:1.5rem}.spinner-border[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}"]})}}return n})()}}]);