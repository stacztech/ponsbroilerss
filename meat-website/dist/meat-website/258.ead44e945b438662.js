"use strict";(self.webpackChunkmeat_website=self.webpackChunkmeat_website||[]).push([[258],{7258:(v,g,o)=>{o.d(g,{K:()=>b});var l=o(177),i=o(8326),p=o(2522),e=o(5345),u=o(4796);function h(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",8),e.bIt("click",function(){const n=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.selectAddress(n.id))}),e.j41(1,"div",9),e.nrm(2,"input",10),e.j41(3,"span",11),e.EFF(4,"Deliver to this address"),e.k0s()(),e.j41(5,"div",12)(6,"p",13),e.EFF(7),e.k0s(),e.j41(8,"p",14),e.EFF(9),e.k0s(),e.j41(10,"p",15),e.EFF(11),e.k0s()(),e.j41(12,"button",16),e.bIt("click",function(s){const c=e.eBV(t).$implicit;return e.XpG(2).startEdit(c),e.Njj(s.stopPropagation())}),e.EFF(13," Edit "),e.k0s()()}if(2&r){const t=a.$implicit,d=e.XpG(2);e.AVh("selected",d.selectedAddressId===t.id),e.R7$(2),e.Y8G("checked",d.selectedAddressId===t.id),e.R7$(5),e.JRh(t.fullName),e.R7$(2),e.E5c("",t.addressLine1,", ",t.city,", ",t.state,""),e.R7$(2),e.SpI("Phone: ",t.phoneNumber,"")}}function _(r,a){if(1&r&&(e.j41(0,"div",6),e.DNE(1,h,14,8,"div",7),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.savedAddresses)}}function m(r,a){if(1&r){const t=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.startAddNew())}),e.EFF(1,"Add New Address"),e.k0s()}}function f(r,a){if(1&r&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.JRh(t.errorMessage)}}function A(r,a){if(1&r){const t=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"h2"),e.EFF(3),e.k0s()(),e.DNE(4,f,2,1,"div",20),e.j41(5,"form",21),e.bIt("ngSubmit",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.saveAddress())}),e.j41(6,"div",22)(7,"label",23),e.EFF(8,"Full name (First and Last name)"),e.k0s(),e.j41(9,"input",24),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.fullName=s)}),e.k0s()(),e.j41(10,"div",22)(11,"label",25),e.EFF(12,"Mobile number"),e.k0s(),e.j41(13,"input",26),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.phoneNumber=s)}),e.k0s()(),e.j41(14,"div",22)(15,"label",27),e.EFF(16,"Alternate Phone (optional)"),e.k0s(),e.j41(17,"input",28),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.altPhone=s)}),e.k0s()(),e.j41(18,"div",22)(19,"label",29),e.EFF(20,"Pincode"),e.k0s(),e.j41(21,"input",30),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.pincode=s)}),e.k0s()(),e.j41(22,"div",22)(23,"label",31),e.EFF(24,"Locality"),e.k0s(),e.j41(25,"input",32),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.locality=s)}),e.k0s()(),e.j41(26,"div",22)(27,"label",33),e.EFF(28,"Address (Area and Street)"),e.k0s(),e.j41(29,"textarea",34),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.addressLine1=s)}),e.k0s(),e.j41(30,"button",35),e.bIt("click",function(){e.eBV(t);const s=e.XpG();return e.Njj(s.detectCurrentLocation())}),e.nrm(31,"i",36),e.EFF(32," Use my current location "),e.k0s()(),e.j41(33,"div",22)(34,"label",37),e.EFF(35,"Landmark (optional)"),e.k0s(),e.j41(36,"input",38),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.landmark=s)}),e.k0s()(),e.j41(37,"div",22)(38,"label",39),e.EFF(39,"City/District/Town"),e.k0s(),e.j41(40,"input",40),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.city=s)}),e.k0s()(),e.j41(41,"div",22)(42,"label",41),e.EFF(43,"State"),e.k0s(),e.j41(44,"input",42),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.newAddress.state=s)}),e.k0s()(),e.j41(45,"div",22)(46,"label")(47,"input",43),e.bIt("ngModelChange",function(s){e.eBV(t);const n=e.XpG();return e.Njj(n.saveAddressForLater=s)}),e.k0s(),e.EFF(48," Save this address for later use "),e.k0s()(),e.j41(49,"div",44)(50,"button",45),e.EFF(51,"Use this address"),e.k0s()()()()}if(2&r){const t=e.XpG();e.R7$(3),e.JRh(t.savedAddresses.length>0?"Or add a new address":"Add a delivery address"),e.R7$(1),e.Y8G("ngIf",t.errorMessage),e.R7$(5),e.Y8G("ngModel",t.newAddress.fullName),e.R7$(4),e.Y8G("ngModel",t.newAddress.phoneNumber),e.R7$(4),e.Y8G("ngModel",t.newAddress.altPhone),e.R7$(4),e.Y8G("ngModel",t.newAddress.pincode),e.R7$(4),e.Y8G("ngModel",t.newAddress.locality),e.R7$(4),e.Y8G("ngModel",t.newAddress.addressLine1),e.R7$(7),e.Y8G("ngModel",t.newAddress.landmark),e.R7$(4),e.Y8G("ngModel",t.newAddress.city),e.R7$(4),e.Y8G("ngModel",t.newAddress.state),e.R7$(3),e.Y8G("ngModel",t.saveAddressForLater)}}let b=(()=>{class r{constructor(t){this.authService=t,this.showOrderSummary=!1,this.addressSelected=new e.bkB,this.savedAddresses=[],this.selectedAddressId=null,this.saveAddressForLater=!1,this.isDetectingLocation=!1,this.isAddingNew=!1,this.isEditing=!1,this.editAddressId=null,this.errorMessage="",this.newAddress={type:"home",fullName:"",phoneNumber:"",altPhone:"",addressLine1:"",addressLine2:"",locality:"",landmark:"",city:"",state:"",pincode:""}}ngOnInit(){this.loadAddresses()}loadAddresses(){this.authService.getAddresses().subscribe({next:t=>{this.savedAddresses=t.addresses||[];const d=this.savedAddresses.find(s=>s.isDefault);d&&(this.selectedAddressId=d.id,this.addressSelected.emit(d)),this.isAddingNew=0===this.savedAddresses.length},error:()=>{this.savedAddresses=[],this.isAddingNew=!0}})}selectAddress(t){this.selectedAddressId=t;const d=this.savedAddresses.find(s=>s.id===t);d&&this.addressSelected.emit(d)}setDefaultAddress(t){this.authService.setDefaultAddress(t).subscribe({next:()=>this.loadAddresses(),error:()=>{this.errorMessage="Failed to set default address."}})}deleteAddress(t){this.authService.deleteAddress(t).subscribe({next:()=>{this.loadAddresses(),this.selectedAddressId===t&&(this.selectedAddressId=null)},error:()=>{this.errorMessage="Failed to delete address."}})}startAddNew(){this.isAddingNew=!0,this.isEditing=!1,this.editAddressId=null,this.newAddress={type:"home",fullName:"",phoneNumber:"",altPhone:"",addressLine1:"",addressLine2:"",locality:"",landmark:"",city:"",state:"",pincode:""}}startEdit(t){this.isEditing=!0,this.isAddingNew=!1,this.editAddressId=t.id,this.newAddress={type:t.type||"home",fullName:t.fullName,phoneNumber:t.phoneNumber,altPhone:t.altPhone||"",addressLine1:t.addressLine1,addressLine2:t.addressLine2||"",locality:t.locality||"",landmark:t.landmark||"",city:t.city,state:t.state,pincode:t.pincode}}saveAddress(){if(/^[0-9]{10}$/.test(this.newAddress.phoneNumber))if(!this.newAddress.altPhone||/^[0-9]{10}$/.test(this.newAddress.altPhone))if(/^[0-9]{6}$/.test(this.newAddress.pincode))if(this.newAddress.locality)if(this.newAddress.city)if(this.newAddress.state)if(this.errorMessage="",this.isEditing&&this.editAddressId)this.authService.updateAddress(this.editAddressId,this.newAddress).subscribe({next:t=>{this.isAddingNew=!1,this.isEditing=!1,this.editAddressId=null,t&&t.address?(this.selectedAddressId=t.address.id,this.addressSelected.emit(t.address)):this.loadAddresses()},error:()=>{this.errorMessage="Failed to update address. Please try again."}});else{const t={...this.newAddress,isDefault:!1};this.authService.addAddress(t).subscribe({next:d=>{this.isAddingNew=!1,this.isEditing=!1,this.editAddressId=null,d&&d.address?(this.selectedAddressId=d.address.id,this.addressSelected.emit(d.address)):this.loadAddresses()},error:()=>{this.errorMessage="Failed to add address. Please try again."}})}else this.errorMessage="Please enter your state.";else this.errorMessage="Please enter your city.";else this.errorMessage="Please enter your locality.";else this.errorMessage="Please enter a valid 6-digit pincode.";else this.errorMessage="Please enter a valid 10-digit alternate phone number.";else this.errorMessage="Please enter a valid 10-digit mobile number."}cancelAddEdit(){this.isAddingNew=!1,this.isEditing=!1,this.editAddressId=null}detectCurrentLocation(){this.isDetectingLocation=!0,navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{console.log("Location detected:",t.coords),this.isDetectingLocation=!1},t=>{console.error("Error detecting location:",t),this.isDetectingLocation=!1}):(console.error("Geolocation is not supported by this browser."),this.isDetectingLocation=!1)}canProceed(){return!!(null!==this.selectedAddressId||this.newAddress.fullName&&this.newAddress.phoneNumber&&this.newAddress.addressLine1)}proceedToPayment(){this.canProceed()&&console.log("Proceeding to payment with address:",this.selectedAddressId?this.savedAddresses.find(t=>t.id===this.selectedAddressId):this.newAddress)}static{this.\u0275fac=function(d){return new(d||r)(e.rXU(u.u))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-delivery-address"]],inputs:{showOrderSummary:"showOrderSummary",orderSummary:"orderSummary"},outputs:{addressSelected:"addressSelected"},standalone:!0,features:[e.aNF],decls:8,vars:3,consts:[[1,"checkout-container"],[1,"checkout-content"],[1,"address-section"],["class","saved-addresses",4,"ngIf"],["class","btn-add-address",3,"click",4,"ngIf"],["class","new-address-form",4,"ngIf"],[1,"saved-addresses"],["class","address-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"address-option",3,"click"],[1,"radio-button"],["type","radio","name","addressSelection",3,"checked"],[1,"radio-label"],[1,"address-details"],[1,"name"],[1,"street"],[1,"phone"],[1,"btn-edit",3,"click"],[1,"btn-add-address",3,"click"],[1,"new-address-form"],[1,"form-header"],["class","alert alert-danger","style","margin-bottom:10px;",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","fullName"],["type","text","id","fullName","name","fullName","required","",3,"ngModel","ngModelChange"],["for","phone"],["type","tel","id","phone","name","phoneNumber","required","","pattern","[0-9]{10}","placeholder","10-digit mobile number",3,"ngModel","ngModelChange"],["for","altPhone"],["type","tel","id","altPhone","name","altPhone","pattern","[0-9]{10}","placeholder","Alternate 10-digit mobile number",3,"ngModel","ngModelChange"],["for","pincode"],["type","text","id","pincode","name","pincode","required","","pattern","[0-9]{6}","maxlength","6","placeholder","6-digit pincode",3,"ngModel","ngModelChange"],["for","locality"],["type","text","id","locality","name","locality","required","","placeholder","Locality / Area / Village",3,"ngModel","ngModelChange"],["for","address"],["id","address","name","addressLine1","required","","placeholder","Address (Area and Street)","rows","3",1,"address-textarea",3,"ngModel","ngModelChange"],["type","button",1,"btn-detect-location",3,"click"],[1,"bi","bi-geo-alt"],["for","landmark"],["type","text","id","landmark","name","landmark","placeholder","E.g. near Apollo hospital",3,"ngModel","ngModelChange"],["for","city"],["type","text","id","city","name","city","required","","placeholder","City/District/Town",3,"ngModel","ngModelChange"],["for","state"],["type","text","id","state","name","state","required","","placeholder","State",3,"ngModel","ngModelChange"],["type","checkbox","name","saveAddress",3,"ngModel","ngModelChange"],[1,"form-actions"],["type","submit",1,"btn-primary"],[1,"alert","alert-danger",2,"margin-bottom","10px"]],template:function(d,s){1&d&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e.EFF(4,"Select a delivery address"),e.k0s(),e.DNE(5,_,2,1,"div",3),e.DNE(6,m,2,0,"button",4),e.DNE(7,A,52,12,"div",5),e.k0s()()()),2&d&&(e.R7$(5),e.Y8G("ngIf",s.savedAddresses.length>0),e.R7$(1),e.Y8G("ngIf",!s.isAddingNew),e.R7$(1),e.Y8G("ngIf",s.isAddingNew||s.isEditing))},dependencies:[l.MD,l.Sq,l.bT,i.YN,i.qT,i.me,i.Zm,i.BC,i.cb,i.YS,i.tU,i.R_,i.vS,i.cV,p.iI],styles:[".checkout-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.checkout-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;gap:30px}.address-section[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 1px 4px #0000001a;padding:20px}.saved-addresses[_ngcontent-%COMP%]{margin-bottom:30px}.address-option[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:8px;padding:15px;margin-bottom:15px;cursor:pointer;position:relative;transition:all .3s ease}.address-option[_ngcontent-%COMP%]:hover{border-color:#e31837}.address-option.selected[_ngcontent-%COMP%]{border-color:#e31837;background:#fff5f6}.radio-button[_ngcontent-%COMP%]{margin-bottom:10px}.radio-label[_ngcontent-%COMP%]{margin-left:8px;font-weight:500}.address-details[_ngcontent-%COMP%]{margin-left:25px}.btn-edit[_ngcontent-%COMP%]{position:absolute;right:15px;top:15px;background:none;border:none;color:#e31837;cursor:pointer}.new-address-form[_ngcontent-%COMP%]{background:white;padding:20px;border-radius:8px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}.form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}.btn-detect-location[_ngcontent-%COMP%]{background:none;border:none;color:#e31837;padding:5px 0;cursor:pointer;display:flex;align-items:center;gap:5px;margin-top:10px}.btn-add-address[_ngcontent-%COMP%]{background:none;border:none;color:#e31837;padding:5px 0;cursor:pointer;display:block;margin-top:10px;margin-left:auto}.form-group[_ngcontent-%COMP%]   textarea.address-textarea[_ngcontent-%COMP%]{width:100%;padding:16px 24px;border:1px solid #dbe3ea;border-radius:4px;font-size:18px;color:#6c757d;background:#fff;resize:none;min-height:90px;box-sizing:border-box;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   textarea.address-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#b5c9d6;background:#f8fbff}@media (max-width: 768px){.checkout-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return r})()}}]);